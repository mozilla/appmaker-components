<element name="app-randomcat">
  <template>
    <link rel="stylesheet" href="{{ASSET_HOST}}/assets/style/app-random_cat.css">
    <div class="wrapper"><img style="width: 30%" src="http://placekitten.com/200/200" /></div>
  </template>
  <description>
    I'm a random cat image.
  </description>
  <script type="text/ceci">
    Ceci(this, {
      percent : 0,
      init: function (params) {
        $(this).on("click",function(){ this.randomCat(); });
        var cat = this.querySelector("img");
        var percent = Math.floor($(this).find("img").width()/$(this).find(".wrapper").width() * 100);
        $(this).attr('catwidth', percent);
      },
      editable: {
        "catwidth": {
          title: "Cat Width",
          min : 0,
          max: 100,
          type: "number",
          description: "Set the width of your cat",
          postset: function(v) {
            this.setWidth(v);
          }
        }
      },
    setWidth : function(val){
      console.log(val);
      this.querySelector("img").style.width = val + "%";
    }, 
     defaultListener: 'Change_Cat',
      listeners: {
        Change_Cat: function () {
          var cat = this.querySelector("img");
          var random = 600 - Math.floor((Math.random()*500));
          $(cat).attr("src","http://placekitten.com/"+random+"/"+random);
        }
      }
    });
  </script>
</element>
