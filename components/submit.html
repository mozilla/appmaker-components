<element name="app-submit">
  <template>
    <link rel="stylesheet" href="{{ASSET_HOST}}/assets/style/app-submit.css"></link>
    <style type="text/css">
    </style>
    <div>
      <div class='button'>
        <button>Submit</button>
      </div>
    </div>
  </div>
  </template>
  <description>
    When clicked I broadcast an aggregate of all my inputs
  </description>
  <script type="text/ceci">
    Ceci(this, {
      init: function (params) {
        var button = this.querySelector('button')
        var t = this;
        this._data = {};
        this.setAttribute('label', 'Submit');
        button.onclick = function (e) {
          var packet = {};
          packet[t.getAttribute('a')] = t._data['a'];
          packet[t.getAttribute('b')] = t._data['b'];
          packet[t.getAttribute('c')] = t._data['c'];
          packet[t.getAttribute('d')] = t._data['d'];
          t.broadcast(packet);
        };
        if (! this.hasAttribute('a')) {
          this.setAttribute("a", "foo");
        }
        if (! this.hasAttribute('b')) {
          this.setAttribute("b", "bar");
        }
        if (! this.hasAttribute('c')) {
          this.setAttribute("c", "baz");
        }
        if (! this.hasAttribute('d')) {
          this.setAttribute("d", "bam");
        }
      },
      editable: {
        "label": {
          title: "Button Label",
          label: "Button Label:",
          type: "text",
          description: "aa",
          postset: function(val) {
            this.querySelector('button').innerHTML = val;
          }
        },
        "a": {
          title: "Slot A will receive:",
          label: "Slot A will receive:",
          type: "text",
          description: "aa",
          postset: function(v) { }
        },
        "b": {
          type: "text",
          title: "Slot B will receive:",
          label: "Slot B will receive:",
          description: "jh",
          postset: function(v) { }
        },
        "c": {
          type: "text",
          title: "Slot C will receive:",
          label: "Slot C will receive:",
          description: "lkj",
          postset: function(v) { }
        },
        "d": {
          type: "text",
          title: "Slot D will receive:",
          label: "Slot D will receive:",
          description: "kjh",
          postset: function(v) { }
        },
      },
      listeners: {
        setSlotA: function (val) {
          this._data['a'] = val;
        },
        setSlotB: function (val) {
          this._data['b'] = val;
        },
        setSlotC: function (val) {
          this._data['c'] = val;
        },
        setSlotD: function (val) {
          this._data['d'] = val;
        },
      },
      broadcast: function (e) {
        this.emit(e)
      }
    });
  </script>
</element>
